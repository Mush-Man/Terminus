<!DOCTYPE html>
<html>
<head>
    <title>Live Defect Detection</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/menu.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/b_real.css') }}">

</head>
<body>
    <header class="navbar">
        <div class="logo">TERMINUS AI</div>
        <div class="menu-icon" id="menu-toggle">&#9776;</div>
    </header>
     
    <!-- Sidebar Menu -->
    <nav class="sidebar" id="sidebar">
        <div class="close-btn" id="close-btn">&times;</div>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="About.html">About</a></li>
            <li><a href="Inventory.php">Road Inventory Inspection</a></li>
            <li><a href="bridge.html">Bridge Inventory Inspection</a></li>
            <li><a href="Condition_survey.html">Condition Inspection</a></li>
            <li><a href="view_roads.html">View Road Inventory</a></li>
            <li><a href="manage_bridge.php">View Bridge Inventory</a></li>
            <li><a href="Condition_survey.html">Condition Survey</a></li>
            <li><a href="manage_condition.html">View Road CS</a></li>
            <li><a href="#">View Bridge CS</a></li>
            <li><a href="logout.php">Logout</a></li>
        </ul>
    </nav>

    <h1>Live Defect Detection</h1>
    <video id="video" autoplay></video>
    <img id="annotatedFrame" style="display: none;">
    <button onclick="startDetection()">Start Detection</button>
    <button onclick="stopDetection()">Stop Detection & Save</button>
    
    <h2>Upload Video for Detection</h2>
    <input type="file" id="videoUpload" accept="video/*">
    <button onclick="uploadVideo()">Upload & Detect</button>
    
    <h2>Detected Defects</h2>
    <ul id="defectList"></ul>

    <h2>Condition Rating</h2>
    <div id="conditionRating">Condition Rating: N/A</div>
    
    <div class="hidden">
        <h2>Generate Report</h2>
        <input type="text" id="roadId" placeholder="Enter Road ID">
        <button onclick="generateReport()">Download PDF Report</button>
        
        <h2>Download Annotated Video</h2>
        <button onclick="downloadAnnotatedVideo()">Download Annotated Video</button>
    </div>

    <h2>Defect Map</h2>
    <div id="map"></div>
    
    <footer class="footer">
        <div class="footer-content">
            <p>Â© 2025 Terminus AI. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Terms of Service</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="{{ url_for('static', filename='js/b_real.js') }}"></script>
    <script src="{{ url_for('static', filename='js/menu.js') }}"></script>
</body>
</html>